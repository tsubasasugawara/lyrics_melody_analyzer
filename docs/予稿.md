# 発表会予稿

Created By: Sugawara, Tsubasa
Last Edited: December 16, 2023 8:01 PM

# 発表会予稿

## 研究背景・目的

- 先行研究で歌詞とメロディの構造分析
- 構造の関係が人気度に影響を与えることを示唆した
- しかし、手動のためデータ数が少ないので信憑性が低い
- 木構造の比較と言いつつ、係り受け木を生成しただけで木同士の比較は行っていなかった
- そのため、分析の自動化でデータ数を増やす
- くわえて、木同士の比較手法の考察

```
歌詞とメロディの構造が楽曲の人気度に与える影響に関する研究が行われている1．この研究では，歌詞の文法構造とメロディの音楽構造に着目している．歌詞とメロディの構造をそれぞれ木構造で表現しその関係を分析したところ，それらが楽曲の人気度に影響を与えることを示唆した．しかし，この研究は分析の一部を手動で行ったため，分析に用いられた楽曲数が10曲と少なく，楽曲数を増やした際に同じような傾向が現れるか明らかになっていない． また、歌詞の文法構造を木構造で表現したが，実際の分析では形態素解析によって得られた単語の一覧を用いていたため、歌詞とメロディの構造の比較において歌詞の木を活用していない．そこで本研究では，分析の自動化によって分析に用いる楽曲数を増やすとともに，歌詞とメロディのような性質の異なる木構造の類似度計算手法を提案することを目的とする．木構造の類似度計算を行うにあたって，本研究では部分木に注目する．一致する部分木の割合を計算することによって，木の構造的な類似性を求めることができる．これを一般化することができれば，性質が異なる木構造の類似度計算に応用できる可能性がある．
```

```
歌詞とメロディの構造が楽曲の人気度に与える影響に関する研究が行われている1．この研究では，歌詞の文法構造とメロディの音楽構造に着目している．歌詞とメロディの構造をそれぞれ木構造で表現しその関係を分析したところ，それらが楽曲の人気度に影響を与えることを示唆した．しかし，この研究は分析の一部を手動で行ったためデータ数が10曲と少なく，データを増やした際に同じような傾向が現れるか明らかになっていない． また、歌詞の文法構造を木構造で表現したが，歌詞とメロディの構造の比較において歌詞の木を活用していない．そこで本研究では，分析の自動化によって分析に用いる楽曲数を増やすとともに，歌詞とメロディのような性質の異なる木構造の類似度計算手法を提案することを目的とする．
```

## 研究課題

- 歌詞は単語が1要素、メロディは音符が1要素
- 要素が異なるため単純な比較が難しい
- ある歌詞に対して、ある音符が対応するためその対応関係を用いる
- 対応する歌詞と音符を同じ要素とし、部分木を比較することで構造的な類似度を計算する

```
歌詞とメロディの木構造を比較するにあたって，これらを直接比較することはできない．木の構成要素が歌詞は単語，メロディは音符と異なっているためである．そこで，歌詞と音符を対応させることで比較を可能にする．本研究ではバンドスコア譜のボーカルパートを用いるので，歌詞に対応する音符が存在しその対応関係を用いることで歌詞とメロディの対応付けを行う．
また，本研究で用いる歌詞とメロディの木は全く関係のない別々の理論から生成されるため，類似性を示すかが不明である．歌詞は自然言語処理，メロディはGTTMを利用して木を生成するので，それぞれの木の持つ意味が異なるためである．そこで，本研究では部分木に着目して木の構造的な類似性を求める．歌詞とメロディのそれぞれの木から部分木を取り出して比較し，一致する部分木の割合を類似度として求めることで，木の構造的な類似性を計算することができると仮定する．そして，この仮定に基づいて歌詞とメロディの構造の関係が人気度に影響を与えるかを調べることとする．
```

```
歌詞とメロディの木構造を比較するにあたって，これらを直接比較することはできない．木の構成要素が歌詞は単語，メロディは音符と異なっているためである．そこで，歌詞と音符を対応させることで比較を可能にする．歌詞には対応する音が基本的に存在するため，その対応関係を用いることで対応付けを行う．
また，本研究で用いる歌詞とメロディの木は全く関係のない別々の理論から生成される意味の異なる木であるため，類似性を示すかが不明である．そこで，本研究では部分木に着目して木の構造的な類似性を求める．部分木による類似度計算を行うにあたって，抽出する部分木の適切な条件の検討を行う．
```

## 提案手法

- 先行研究では行われなかった、構文解析木とタイムスパン木の比較を行う
- 文法構造はGiNZAで係り受け木
- メロディ構造はGTTMによってタイムスパン木
- 音符と歌詞は対応しているため、形態素解析によって単語ごとにidが割り振られるため、それを音符に対応付ける
- そうすると、タイムスパン木に複数の同じidを持つ要素ができるため、タイムスパン木の簡約化によって一意なものにする
- その後、部分木を抜き出し一致する割合を求める
- 全部分木だと条件が厳しいため、性質の異なる木構造で類似性を示すことは難しい。
- 関連研究で直上のみを見ることで条件の緩和に成功しているため、親子のみ見る

```
本研究では先行研究で行われた単語の一致率計算を自動化するとともに，係り受け木とタイムスパン木の類似度計算手法の提案を行う．単語の一致率計算の自動化については，先行研究で用いられた手法を基にシステムを作成する．木構造の類似度計算については以下の手順によって行う．
(1)木構造の生成
先行研究で行われていたのと同様の手法で木構造の生成を行う．具体的には、歌詞は自然言語処理のライブラリのひとつである GiNZA を用いることで、単語間の係り受け関係を表す係り受け木（図 1）を生成する．そして、メロディは GTTM（生成音楽理論）によって、メロディの中の音の重要度を表すタイムスパン木（図 2）を生成する．
（2）歌詞と音符の対応付け
係り受け木とタイムスパン木では構成要素が異なるため，歌詞と音符の対応付ける必要がある．そこで，係り受け木を生成する際に各ノードに割り振られる ID を，タイムスパン木の各要素である音符に対応付ける．しかし、これだけでは同じ ID のノードがタイムスパン木に複数存在してしまう．そこで、タイムスパン木はルートに近い要素ほど重要なものであるという性質を利用して，タイムスパン木の簡約化を行うことで IDを一意なものとする．
(3)木構造の類似度
計算類似度計算では辺が 1 つのみの部分木を全て取り出し，歌詞とメロディで比較し一致する部分木の割合を求める．歌詞とメロディの木構造は別々の理論によって生成されるため，条件を厳しくしてしまうとそれらの構造的な類似性を示さため，あるノードとその直上のノードだけで構成される部分木を用いることで条件を緩和し構造的な類似性を求める．それによって得られた部分木を，歌詞とメロディで比較することで類似度計算を行う
```

```
本研究では先行研究で行われた単語の一致率計算を自動化するとともに，係り受け木とタイムスパン木の類似度計算手法の提案を行う．単語の一致率計算については，先行研究で手動で行ったことをシステム化し，木構造の類似度計算については以下の手順で行う．
(1)木の生成
木の生成は，先行研究で行われていたのと同様の手法で行う．具体的には、歌詞は自然言語処理ライブラリのひとつであるGiNZAを用いて，係り受け木を生成する．メロディはGTTM（生成音楽理論）によって、タイムスパン木を生成する．
（2）歌詞と音符の対応付け
係り受け木とタイムスパン木では構成要素が異なるため，歌詞と音符を対応付ける必要がある．そこで，係り受け木を生成する際に各ノードに割り振られるIDを，タイムスパン木の各ノードに対応付ける．しかし、これだけでは同じIDのノードがタイムスパン木に複数存在してしまう．そこで、タイムスパン木はルートに近い要素ほど重要なものであるという性質を利用して，タイムスパン木の簡約化を行いIDを一意なものとする．
(2)類似度計算
類似度計算では，歌詞とメロディの木から得られる部分木を比較し，一致する割合を求める．比較に用いる部分木については，全ての部分木を使う場合と1辺のみの部分木を使う場合類似度の値を比較し，適度な類似性を示したものを部分木の抽出条件とする．
```

## 結果

```
まず，単語の一致率計算を自動化しデータ数を増やし，楽曲の人気度との関係を分析した．その結果を図3に示す．
 
図3　単語の一致率と人気度の関係

次に，歌詞とメロディの木構造の類似度を計算し，同様に楽曲の人気度との関係を分析した．その結果を図4に示す．
 
図4　木構造の類似度と人気度の関係
```

## 考察

- 単語の一致率において、普通曲が左上の方に集まっている
- 単語の一致率において、人気曲が右上の方に集まっている

```
図[全部分木による木構造類似度の度数分布]と図[親子の木構造類似度の度数分布]より，全部分木を用いた場合には殆どが類似性を示さなかったのに対して，1辺のみの部分木を用いた場合のほうが広く分散していることがわかることから，歌詞とメロディのような性質の異なる木構造の類似度計算には，1辺のみの部分木を用いた比較手法が適切であると考えられる．係り受け木とタイムスパン木は全く関係のない理論からそれぞれ生成される．そのため，それぞれの木で重要な要素が異なるため，木の構造が全く異なったものとなってしまうためである．

図[単語の一致率, 全部, Youtube]より，単語の一致率と楽曲の人気度の間には，先行研究のような関係は見られなかった．これは，先行研究で用いられた楽曲数が10曲と少なかったため，偶然現れたものだったと考えられる．しかし，0.5≤Aメロの単語の一致率<0.65，0.65<サビの単語の一致率<0.9の範囲は普通曲のみとなっていることに加え，本研究で用いた楽曲数もまだ充分とは言えない．そのため，さらに楽曲数を更に増やして分析することで，何かしらの傾向を得られる可能性がある．

単語の一致率と楽曲の人気度の関係を分析したのと同じように，木構造の類似度と楽曲の人気度との関係の分析を行った．その結果を図[親子の木構造類似度, 全部, Youtube]に示す．図[親子の木構造類似度, 全部, Youtube]より，歌詞とメロディの木構造の類似度と楽曲の人気度には，相関関係がないと言える．係り受け木は単語間の係り受け関係を表したものであり，楽曲を聴く際に歌詞の文法について意識することはあまりないため，その構造は人気度へあまり影響しないと考えられる．
```

## おわりに

```
本研究では，歌詞とメロディの木の類似度計算手法について検討し，1辺のみの部分木を用いることで構造的な類似性を示すことができた．しかし，本研究ではレベルや次数のような構造の特徴量について考慮することができなかった．そのため，これらの特徴量による重みづけを行った類似度計算を行うことで，構造の特徴を更によく反映させることができると考えられる．
また，先行研究で行われた単語の一致率計算を自動化し，単語の一致率や木構造の類似性と楽曲の人気度の関係をより多くの楽曲を用いて分析した．
```

## 先行研究

## 歌詞とメロディの構造分析手法による日本のポピュラー音楽の人気度に影響する要因分析に関する研究

```
田中の研究では，歌詞の文法構造とメロディの音楽構造に着目し，それらが楽曲の人気度に与える影響を分析した[]．歌詞は形態素解析によって単語で分割し，メロディはGTTMを用いてタイムスパン木で表現した．1単語に対応する音符がタイムスパン木において一つの部分木にまとまっている場合を一致しているとし，その割合を「単語の一致率」として求め人気度との関係を調べた．その結果，単語の一致率が楽曲の人気度に影響を与えることが示唆された．

田中昌之, 歌詞とメロディの構造分析手法による日本のポピュラー音楽の人気度に影響する要因分析に関する研究, 国士舘大学令和4年度修士論文 (2023).
```

## 関連研究

## 部分木のマッチを用いた構文解析木間の類似度について

```
秋友らの研究では，構文解析木間の類似度計算に部分木のマッチを用いることで，構造的な類似性を求めることができるかを調べた[]．構文解析木から抽出した部分木列を，一致した部分木の個数や高さによる重み付けなどによって類似度を計算した．その結果，構文解析木間の類似度計算に構造的な類似性を反映させることができた．

秋友克俊, 椎名広光, 部分木のマッチを用いた構文解析木間の類似度について, 数理解析研究所講究録　1489巻　2006年, pp.209-215 (2006).
```

## タイムスパン部分木一致率に基づく楽曲間類似度

```
浜中らの研究では，任意の2つの曲間のタイムスパン木の類似度の定義を行った[5]．従来の楽曲の類似度を求める手法では多くのメロディで類似性を示さなかったことから，浜中らは部分木に注目することで類似性の条件を緩和した．これにより，従来の手法では類似性を示さなかった任意の2つの曲に対して類似性を示すことができた．

浜中雅俊, 平田圭二, 東条敏, タイムスパン部分木一致率に基づく楽曲間類似度, 情報処理学会研究報告 Vol.2014-MUS-104 No.21, pp.1-5 (2014)．
```

## 参考文献

### 本文

```
田中昌之, 歌詞とメロディの構造分析手法による日本のポピュラー音楽の人気度に影響する要因分析に関する研究, 国士舘大学令和4年度修士論文 (2023).
秋友克俊, 椎名広光, 部分木のマッチを用いた構文解析木間の類似度について, 数理解析研究所講究録　1489巻　2006年, pp.209-215 (2006).
浜中雅俊, 平田圭二, 東条敏, タイムスパン部分木一致率に基づく楽曲間類似度, 情報処理学会研究報告 Vol.2014-MUS-104 No.21, pp.1-5 (2014)．
```